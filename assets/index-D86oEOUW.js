(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))_(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&_(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function _(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();var V,v,mt,N,_t,yt,B,Q,G,X,O={},gt=[],Tt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Z=Array.isArray;function C(e,t){for(var i in t)e[i]=t[i];return e}function bt(e){var t=e.parentNode;t&&t.removeChild(e)}function $t(e,t,i){var _,n,o,r={};for(o in t)o=="key"?_=t[o]:o=="ref"?n=t[o]:r[o]=t[o];if(arguments.length>2&&(r.children=arguments.length>3?V.call(arguments,2):i),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)r[o]===void 0&&(r[o]=e.defaultProps[o]);return j(e,r,_,n,null)}function j(e,t,i,_,n){var o={type:e,props:t,key:i,ref:_,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:n??++mt,__i:-1,__u:0};return n==null&&v.vnode!=null&&v.vnode(o),o}function Pt(){return{current:null}}function A(e){return e.children}function F(e,t){this.props=e,this.context=t}function E(e,t){if(t==null)return e.__?E(e.__,e.__i+1):null;for(var i;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null)return i.__e;return typeof e.type=="function"?E(e):null}function xt(e){var t,i;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null){e.__e=e.__c.base=i.__e;break}return xt(e)}}function nt(e){(!e.__d&&(e.__d=!0)&&N.push(e)&&!q.__r++||_t!==v.debounceRendering)&&((_t=v.debounceRendering)||yt)(q)}function q(){var e,t,i,_,n,o,r,h;for(N.sort(B);e=N.shift();)e.__d&&(t=N.length,_=void 0,o=(n=(i=e).__v).__e,r=[],h=[],i.__P&&((_=C({},n)).__v=n.__v+1,v.vnode&&v.vnode(_),tt(i.__P,_,n,i.__n,i.__P.ownerSVGElement!==void 0,32&n.__u?[o]:null,r,o??E(n),!!(32&n.__u),h),_.__v=n.__v,_.__.__k[_.__i]=_,Ht(r,_,h),_.__e!=o&&xt(_)),N.length>t&&N.sort(B));q.__r=0}function wt(e,t,i,_,n,o,r,h,a,c,u){var s,f,l,b,H,x=_&&_.__k||gt,p=t.length;for(i.__d=a,Ct(i,t,x),a=i.__d,s=0;s<p;s++)(l=i.__k[s])!=null&&typeof l!="boolean"&&typeof l!="function"&&(f=l.__i===-1?O:x[l.__i]||O,l.__i=s,tt(e,l,f,n,o,r,h,a,c,u),b=l.__e,l.ref&&f.ref!=l.ref&&(f.ref&&et(f.ref,null,l),u.push(l.ref,l.__c||b,l)),H==null&&b!=null&&(H=b),65536&l.__u||f.__k===l.__k?(a&&!a.isConnected&&(a=E(f)),a=kt(l,a,e)):typeof l.type=="function"&&l.__d!==void 0?a=l.__d:b&&(a=b.nextSibling),l.__d=void 0,l.__u&=-196609);i.__d=a,i.__e=H}function Ct(e,t,i){var _,n,o,r,h,a=t.length,c=i.length,u=c,s=0;for(e.__k=[],_=0;_<a;_++)r=_+s,(n=e.__k[_]=(n=t[_])==null||typeof n=="boolean"||typeof n=="function"?null:typeof n=="string"||typeof n=="number"||typeof n=="bigint"||n.constructor==String?j(null,n,null,null,null):Z(n)?j(A,{children:n},null,null,null):n.constructor===void 0&&n.__b>0?j(n.type,n.props,n.key,n.ref?n.ref:null,n.__v):n)!=null?(n.__=e,n.__b=e.__b+1,h=Nt(n,i,r,u),n.__i=h,o=null,h!==-1&&(u--,(o=i[h])&&(o.__u|=131072)),o==null||o.__v===null?(h==-1&&s--,typeof n.type!="function"&&(n.__u|=65536)):h!==r&&(h===r+1?s++:h>r?u>a-r?s+=h-r:s--:h<r?h==r-1&&(s=h-r):s=0,h!==_+s&&(n.__u|=65536))):(o=i[r])&&o.key==null&&o.__e&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=E(o)),Y(o,o,!1),i[r]=null,u--);if(u)for(_=0;_<c;_++)(o=i[_])!=null&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=E(o)),Y(o,o))}function kt(e,t,i){var _,n;if(typeof e.type=="function"){for(_=e.__k,n=0;_&&n<_.length;n++)_[n]&&(_[n].__=e,t=kt(_[n],t,i));return t}e.__e!=t&&(i.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Nt(e,t,i,_){var n=e.key,o=e.type,r=i-1,h=i+1,a=t[i];if(a===null||a&&n==a.key&&o===a.type&&!(131072&a.__u))return i;if(_>(a!=null&&!(131072&a.__u)?1:0))for(;r>=0||h<t.length;){if(r>=0){if((a=t[r])&&!(131072&a.__u)&&n==a.key&&o===a.type)return r;r--}if(h<t.length){if((a=t[h])&&!(131072&a.__u)&&n==a.key&&o===a.type)return h;h++}}return-1}function ot(e,t,i){t[0]==="-"?e.setProperty(t,i??""):e[t]=i==null?"":typeof i!="number"||Tt.test(t)?i:i+"px"}function W(e,t,i,_,n){var o;t:if(t==="style")if(typeof i=="string")e.style.cssText=i;else{if(typeof _=="string"&&(e.style.cssText=_=""),_)for(t in _)i&&t in i||ot(e.style,t,"");if(i)for(t in i)_&&i[t]===_[t]||ot(e.style,t,i[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=i,i?_?i.u=_.u:(i.u=Q,e.addEventListener(t,o?X:G,o)):e.removeEventListener(t,o?X:G,o);else{if(n)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t in e)try{e[t]=i??"";break t}catch{}typeof i=="function"||(i==null||i===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,i))}}function st(e){return function(t){if(this.l){var i=this.l[t.type+e];if(t.t==null)t.t=Q++;else if(t.t<i.u)return;return i(v.event?v.event(t):t)}}}function tt(e,t,i,_,n,o,r,h,a,c){var u,s,f,l,b,H,x,p,d,D,y,S,L,w,M,k=t.type;if(t.constructor!==void 0)return null;128&i.__u&&(a=!!(32&i.__u),o=[h=t.__e=i.__e]),(u=v.__b)&&u(t);t:if(typeof k=="function")try{if(p=t.props,d=(u=k.contextType)&&_[u.__c],D=u?d?d.props.value:u.__:_,i.__c?x=(s=t.__c=i.__c).__=s.__E:("prototype"in k&&k.prototype.render?t.__c=s=new k(p,D):(t.__c=s=new F(p,D),s.constructor=k,s.render=At),d&&d.sub(s),s.props=p,s.state||(s.state={}),s.context=D,s.__n=_,f=s.__d=!0,s.__h=[],s._sb=[]),s.__s==null&&(s.__s=s.state),k.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=C({},s.__s)),C(s.__s,k.getDerivedStateFromProps(p,s.__s))),l=s.props,b=s.state,s.__v=t,f)k.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(k.getDerivedStateFromProps==null&&p!==l&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(p,D),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(p,s.__s,D)===!1||t.__v===i.__v)){for(t.__v!==i.__v&&(s.props=p,s.state=s.__s,s.__d=!1),t.__e=i.__e,t.__k=i.__k,t.__k.forEach(function($){$&&($.__=t)}),y=0;y<s._sb.length;y++)s.__h.push(s._sb[y]);s._sb=[],s.__h.length&&r.push(s);break t}s.componentWillUpdate!=null&&s.componentWillUpdate(p,s.__s,D),s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(l,b,H)})}if(s.context=D,s.props=p,s.__P=e,s.__e=!1,S=v.__r,L=0,"prototype"in k&&k.prototype.render){for(s.state=s.__s,s.__d=!1,S&&S(t),u=s.render(s.props,s.state,s.context),w=0;w<s._sb.length;w++)s.__h.push(s._sb[w]);s._sb=[]}else do s.__d=!1,S&&S(t),u=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++L<25);s.state=s.__s,s.getChildContext!=null&&(_=C(C({},_),s.getChildContext())),f||s.getSnapshotBeforeUpdate==null||(H=s.getSnapshotBeforeUpdate(l,b)),wt(e,Z(M=u!=null&&u.type===A&&u.key==null?u.props.children:u)?M:[M],t,i,_,n,o,r,h,a,c),s.base=t.__e,t.__u&=-161,s.__h.length&&r.push(s),x&&(s.__E=s.__=null)}catch($){t.__v=null,a||o!=null?(t.__e=h,t.__u|=a?160:32,o[o.indexOf(h)]=null):(t.__e=i.__e,t.__k=i.__k),v.__e($,t,i)}else o==null&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=Et(i.__e,t,i,_,n,o,r,a,c);(u=v.diffed)&&u(t)}function Ht(e,t,i){t.__d=void 0;for(var _=0;_<i.length;_++)et(i[_],i[++_],i[++_]);v.__c&&v.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(o){o.call(n)})}catch(o){v.__e(o,n.__v)}})}function Et(e,t,i,_,n,o,r,h,a){var c,u,s,f,l,b,H,x=i.props,p=t.props,d=t.type;if(d==="svg"&&(n=!0),o!=null){for(c=0;c<o.length;c++)if((l=o[c])&&"setAttribute"in l==!!d&&(d?l.localName===d:l.nodeType===3)){e=l,o[c]=null;break}}if(e==null){if(d===null)return document.createTextNode(p);e=n?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,p.is&&p),o=null,h=!1}if(d===null)x===p||h&&e.data===p||(e.data=p);else{if(o=o&&V.call(e.childNodes),x=i.props||O,!h&&o!=null)for(x={},c=0;c<e.attributes.length;c++)x[(l=e.attributes[c]).name]=l.value;for(c in x)l=x[c],c=="children"||(c=="dangerouslySetInnerHTML"?s=l:c==="key"||c in p||W(e,c,null,l,n));for(c in p)l=p[c],c=="children"?f=l:c=="dangerouslySetInnerHTML"?u=l:c=="value"?b=l:c=="checked"?H=l:c==="key"||h&&typeof l!="function"||x[c]===l||W(e,c,l,x[c],n);if(u)h||s&&(u.__html===s.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(s&&(e.innerHTML=""),wt(e,Z(f)?f:[f],t,i,_,n&&d!=="foreignObject",o,r,o?o[0]:i.__k&&E(i,0),h,a),o!=null)for(c=o.length;c--;)o[c]!=null&&bt(o[c]);h||(c="value",b!==void 0&&(b!==e[c]||d==="progress"&&!b||d==="option"&&b!==x[c])&&W(e,c,b,x[c],!1),c="checked",H!==void 0&&H!==e[c]&&W(e,c,H,x[c],!1))}return e}function et(e,t,i){try{typeof e=="function"?e(t):e.current=t}catch(_){v.__e(_,i)}}function Y(e,t,i){var _,n;if(v.unmount&&v.unmount(e),(_=e.ref)&&(_.current&&_.current!==e.__e||et(_,null,t)),(_=e.__c)!=null){if(_.componentWillUnmount)try{_.componentWillUnmount()}catch(o){v.__e(o,t)}_.base=_.__P=null}if(_=e.__k)for(n=0;n<_.length;n++)_[n]&&Y(_[n],t,i||typeof e.type!="function");i||e.__e==null||bt(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function At(e,t,i){return this.constructor(e,i)}function Lt(e,t,i){var _,n,o,r;v.__&&v.__(e,t),n=(_=typeof i=="function")?null:t.__k,o=[],r=[],tt(t,e=(!_&&i||t).__k=$t(A,null,[e]),n||O,O,t.ownerSVGElement!==void 0,!_&&i?[i]:n?null:t.firstChild?V.call(t.childNodes):null,o,!_&&i?i:n?n.__e:t.firstChild,_,r),Ht(o,e,r)}V=gt.slice,v={__e:function(e,t,i,_){for(var n,o,r;t=t.__;)if((n=t.__c)&&!n.__)try{if((o=n.constructor)&&o.getDerivedStateFromError!=null&&(n.setState(o.getDerivedStateFromError(e)),r=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(e,_||{}),r=n.__d),r)return n.__E=n}catch(h){e=h}throw e}},mt=0,F.prototype.setState=function(e,t){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=C({},this.state),typeof e=="function"&&(e=e(C({},i),this.props)),e&&C(i,e),e!=null&&this.__v&&(t&&this._sb.push(t),nt(this))},F.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),nt(this))},F.prototype.render=A,N=[],yt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,B=function(e,t){return e.__v.__b-t.__v.__b},q.__r=0,Q=0,G=st(!1),X=st(!0);var R,m,z,rt,K=0,St=[],U=[],g=v,ht=g.__b,ct=g.__r,at=g.diffed,lt=g.__c,ut=g.unmount,dt=g.__;function Dt(e,t){g.__h&&g.__h(m,e,K||t),K=0;var i=m.__H||(m.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({__V:U}),i.__[e]}function P(e){return K=1,Ot(Mt,e)}function Ot(e,t,i){var _=Dt(R++,2);if(_.t=e,!_.__c&&(_.__=[Mt(void 0,t),function(h){var a=_.__N?_.__N[0]:_.__[0],c=_.t(a,h);a!==c&&(_.__N=[c,_.__[1]],_.__c.setState({}))}],_.__c=m,!m.u)){var n=function(h,a,c){if(!_.__c.__H)return!0;var u=_.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!o||o.call(this,h,a,c);var s=!1;return u.forEach(function(f){if(f.__N){var l=f.__[0];f.__=f.__N,f.__N=void 0,l!==f.__[0]&&(s=!0)}}),!(!s&&_.__c.props===h)&&(!o||o.call(this,h,a,c))};m.u=!0;var o=m.shouldComponentUpdate,r=m.componentWillUpdate;m.componentWillUpdate=function(h,a,c){if(this.__e){var u=o;o=void 0,n(h,a,c),o=u}r&&r.call(this,h,a,c)},m.shouldComponentUpdate=n}return _.__N||_.__}function ft(e,t){var i=Dt(R++,3);!g.__s&&Ft(i.__H,t)&&(i.__=e,i.i=t,m.__H.__h.push(i))}function Wt(){for(var e;e=St.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(I),e.__H.__h.forEach(J),e.__H.__h=[]}catch(t){e.__H.__h=[],g.__e(t,e.__v)}}g.__b=function(e){m=null,ht&&ht(e)},g.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),dt&&dt(e,t)},g.__r=function(e){ct&&ct(e),R=0;var t=(m=e.__c).__H;t&&(z===m?(t.__h=[],m.__h=[],t.__.forEach(function(i){i.__N&&(i.__=i.__N),i.__V=U,i.__N=i.i=void 0})):(t.__h.forEach(I),t.__h.forEach(J),t.__h=[],R=0)),z=m},g.diffed=function(e){at&&at(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(St.push(t)!==1&&rt===g.requestAnimationFrame||((rt=g.requestAnimationFrame)||jt)(Wt)),t.__H.__.forEach(function(i){i.i&&(i.__H=i.i),i.__V!==U&&(i.__=i.__V),i.i=void 0,i.__V=U})),z=m=null},g.__c=function(e,t){t.some(function(i){try{i.__h.forEach(I),i.__h=i.__h.filter(function(_){return!_.__||J(_)})}catch(_){t.some(function(n){n.__h&&(n.__h=[])}),t=[],g.__e(_,i.__v)}}),lt&&lt(e,t)},g.unmount=function(e){ut&&ut(e);var t,i=e.__c;i&&i.__H&&(i.__H.__.forEach(function(_){try{I(_)}catch(n){t=n}}),i.__H=void 0,t&&g.__e(t,i.__v))};var pt=typeof requestAnimationFrame=="function";function jt(e){var t,i=function(){clearTimeout(_),pt&&cancelAnimationFrame(t),setTimeout(e)},_=setTimeout(i,100);pt&&(t=requestAnimationFrame(i))}function I(e){var t=m,i=e.__c;typeof i=="function"&&(e.__c=void 0,i()),m=t}function J(e){var t=m;e.__c=e.__(),m=t}function Ft(e,t){return!e||e.length!==t.length||t.some(function(i,_){return i!==e[_]})}function Mt(e,t){return typeof t=="function"?t(e):t}class Ut{constructor(t,i,_=1e3,n=1e3){this.objs={},this.index=0,this.centerObj=null,this.boardWidth=5e3,this.boardHeight=5e3,this.ctx=t,this.canvas=i,this.boardWidth=_,this.boardHeight=n}setCenter(t){this.centerObj=t}remove(t){delete this.objs[t]}add(t){return this.objs[this.index]=t,this.index++}drawGrid(){const i="rgba(200, 200, 200)";this.ctx.beginPath();for(let _=0;_<=this.boardHeight;_+=20)this.ctx.moveTo(0,_),this.ctx.lineTo(this.boardWidth,_);for(let _=0;_<=this.boardWidth;_+=20)this.ctx.moveTo(_,0),this.ctx.lineTo(_,this.boardHeight);this.ctx.strokeStyle=i,this.ctx.stroke()}draw(){this.ctx.save(),this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.centerObj&&this.ctx.translate(this.canvas.width/2-this.centerObj.x,this.canvas.height/2-this.centerObj.y),this.drawGrid();for(const t in this.objs){const i=this.objs[t];if(!i.live){this.remove(+t);continue}if(i.tick(),this.centerObj){const _=i.x-this.centerObj.x,n=i.y-this.centerObj.y;Math.sqrt(_**2+n**2)<=this.boardHeight&&i.draw()}else i.draw()}this.ctx.restore()}}class it{constructor(t,i,_,n,o){this.id=0,this.width=0,this.height=0,this.x=0,this.y=0,this.vx=0,this.vy=0,this.team=0,this.live=!0,this.name="Player",this.bodyScore=0,this.score=0,this.level=1,this.health=100,this.lastAttackedTime=0,this.bodyDamage=2,this.maxHealth=2,this.healthRegen=0,this.moveSpeed=1,this.nextTick=[],this.world=t,this.team=i,this.id=this.world.add(this),this.x=_,this.y=n,o?this.name=o:this.name+=" "+this.id}getDie(){this.live=!1}getAttack(t){const i=Math.max(0,this.bodyDamage*15-t.maxHealth*10);t.health-=i,t.lastAttackedTime=+new Date,i>0&&(t.vx=this.vx*.8,t.vy=this.vy*.8,t.nextTickEvent(()=>t.stop())),t.health<0&&(t.getDie(),this.bodyScore+=Math.round(this.bodyDamage*15-t.maxHealth*10))}getHit(t){this.getAttack(t),t.getAttack(this)}move(t){this.vx=Math.cos(t)*(this.moveSpeed*5),this.vy=Math.sin(t)*(this.moveSpeed*5)}stop(){this.vx=this.vy=0}nextTickEvent(t){this.nextTick.push(t)}tick(){this.x=Math.max(0,Math.min(this.world.boardWidth,this.x+this.vx)),this.y=Math.max(0,Math.min(this.world.boardHeight,this.y+this.vy)),this.health<100&&(this.health+=this.healthRegen*.1,+new Date-this.lastAttackedTime>3e4&&(this.health+=Math.log(this.health+1)*.3),(this.health>100||isNaN(this.health))&&(this.health=100));for(const t of this.nextTick)t();this.nextTick=[];for(const t in this.world.objs){const i=this.world.objs[t];this!==i&&this.x<i.x+i.width&&this.x+this.width>i.x&&this.y<i.y+i.height&&this.y+this.height>i.y&&this.team!==i.team&&this.getHit(i)}this.score=this.bodyScore}draw(){}}class It extends it{constructor(){super(...arguments),this.lastLaunchTime=0,this.bullets=[]}_launch(t){+new Date-this.lastLaunchTime>40&&(this.lastLaunchTime=+new Date,this.bullets.push(new qt(this.world,this.team,this.x+this.width/2,this.y+this.height/2,t)))}tick(){super.tick(),this.score=this.bodyScore+this.bullets.reduce((t,i)=>t+i.score,0)}}class vt extends It{constructor(){super(...arguments),this.width=20,this.height=20}draw(){this.world.ctx.fillStyle="#0095DD",this.world.ctx.fillRect(this.x,this.y,this.width,this.height),this.world.ctx.textAlign="center",this.world.ctx.fillText(this.name,this.x+this.width/2,this.y+this.height/2-15),this.world.ctx.fillText(this.health.toFixed(0),this.x+this.width/2,this.y+this.height/2+20)}launch(){this._launch(Math.atan2(-1,0)),this._launch(Math.atan2(1,0)),this._launch(Math.atan2(0,-1)),this._launch(Math.atan2(0,1))}}class qt extends it{constructor(t,i,_,n,o){super(t,i,_,n),this.width=5,this.height=5,this.startTime=0,this.maxHealth=.4,this.startTime=+new Date,this.move(o)}tick(){super.tick(),+new Date-this.startTime>2e3&&this.getDie()}draw(){this.world.ctx.fillStyle="#0095DD",this.world.ctx.beginPath(),this.world.ctx.arc(this.x,this.y,this.width,0,Math.PI*2),this.world.ctx.fill()}}class Rt extends it{constructor(t,i,_,n){super(t,i,_,n),this.width=8,this.height=8}tick(){super.tick();let t=null,i=1/0;for(const _ in this.world.objs){const n=this.world.objs[_];if(n===this||n.team===this.team)continue;const o=n.x-this.x,r=n.y-this.y,h=Math.sqrt(o*o+r*r);h<i&&(i=h,t=n)}if(t){const _=Math.atan2(t.y-this.y,t.x-this.x);this.move(_)}}draw(){this.world.ctx.fillStyle="red",this.world.ctx.beginPath(),this.world.ctx.arc(this.x,this.y,this.width,0,Math.PI*2),this.world.ctx.fill()}}var Vt=0;function T(e,t,i,_,n,o){var r,h,a={};for(h in t)h=="ref"?r=t[h]:a[h]=t[h];var c={type:e,props:a,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Vt,__i:-1,__u:0,__source:n,__self:o};if(typeof e=="function"&&(r=e.defaultProps))for(h in r)a[h]===void 0&&(a[h]=r[h]);return v.vnode&&v.vnode(c),c}function zt(){const e=Pt(),[t,i]=P(null),[_,n]=P(null),[o,r]=P(0),[h,a]=P(0),[c,u]=P(0),[s,f]=P(!1),[l,b]=P(0),[H,x]=P(0),p=+new Date;return ft(()=>{if(e!=null&&e.current){const d=e.current;i(d),n(d.getContext("2d"))}},[e]),ft(()=>{if(_){const d=new Ut(_,t),D=70,y=new vt(d,1,20,20),S=new Rt(d,5,d.boardWidth/2,d.boardHeight/2);y.maxHealth=3,y.healthRegen=0,y.moveSpeed=1,y.bodyDamage=2,S.maxHealth=999,S.healthRegen=0,S.moveSpeed=.8,S.bodyDamage=4,d.setCenter(y),t.addEventListener("touchstart",w=>{const M=w.touches[0].clientX,k=w.touches[0].clientY,$=Math.atan2(k-t.height/2,M-t.width/2);y.move($),w.preventDefault()},{passive:!1}),t.addEventListener("touchmove",w=>{const M=w.touches[0].clientX,k=w.touches[0].clientY,$=Math.atan2(k-t.height/2,M-t.width/2);y.move($),w.preventDefault()},{passive:!1}),document.addEventListener("keydown",w=>{switch(w.code){case"ArrowUp":y.move(Math.atan2(-1,0));break;case"ArrowDown":y.move(Math.atan2(1,0));break;case"ArrowLeft":y.move(Math.atan2(0,-1));break;case"ArrowRight":y.move(Math.atan2(0,1));break}});const L=()=>{d.draw(),u(+new Date-p),b(y.live?y.score:0),x(S.score);const w=Object.keys(d.objs);if(w.length<D)for(let M=0;M<D-w.length;M++)new vt(d,0,Math.random()*d.boardWidth,Math.random()*d.boardHeight,"Dust");d.centerObj===y&&!y.live&&(f(!0),d.setCenter(S)),requestAnimationFrame(L)};L()}},[_]),r(document.body.clientWidth),a(document.body.clientHeight),window.addEventListener("resize",d=>{r(document.body.clientWidth),a(document.body.clientHeight)},!0),T(A,{children:[T("canvas",{ref:e,width:o,height:h}),s?T("h1",{className:"game-over",children:"Game over"}):null,T("div",{className:"score-board",children:[T("span",{className:"time",children:[`0${Math.floor(c/6e4%60)}`.slice(-2),":",`0${Math.floor(c/1e3%60)}`.slice(-2),":",`0${Math.floor(c/10)}`.slice(-2)]})," ",T("span",{className:"score",children:[l>0?T(A,{children:[T("span",{className:"my-score",children:l})," vs "]}):null,T("span",{className:"drone-score",children:H})]})]})]})}Lt(T(zt,{}),document.getElementById("app"));
