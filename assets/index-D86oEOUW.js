(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))n(_);new MutationObserver(_=>{for(const o of _)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(_){const o={};return _.integrity&&(o.integrity=_.integrity),_.referrerPolicy&&(o.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?o.credentials="include":_.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(_){if(_.ep)return;_.ep=!0;const o=i(_);fetch(_.href,o)}})();var B,v,bt,W,ht,wt,J,nt,Q,Z,j={},kt=[],Et=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,_t=Array.isArray;function E(e,t){for(var i in t)e[i]=t[i];return e}function Dt(e){var t=e.parentNode;t&&t.removeChild(e)}function At(e,t,i){var n,_,o,r={};for(o in t)o=="key"?n=t[o]:o=="ref"?_=t[o]:r[o]=t[o];if(arguments.length>2&&(r.children=arguments.length>3?B.call(arguments,2):i),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)r[o]===void 0&&(r[o]=e.defaultProps[o]);return U(e,r,n,_,null)}function U(e,t,i,n,_){var o={type:e,props:t,key:i,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:_??++bt,__i:-1,__u:0};return _==null&&v.vnode!=null&&v.vnode(o),o}function Wt(){return{current:null}}function O(e){return e.children}function R(e,t){this.props=e,this.context=t}function L(e,t){if(t==null)return e.__?L(e.__,e.__i+1):null;for(var i;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null)return i.__e;return typeof e.type=="function"?L(e):null}function Ht(e){var t,i;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null){e.__e=e.__c.base=i.__e;break}return Ht(e)}}function ct(e){(!e.__d&&(e.__d=!0)&&W.push(e)&&!V.__r++||ht!==v.debounceRendering)&&((ht=v.debounceRendering)||wt)(V)}function V(){var e,t,i,n,_,o,r,h;for(W.sort(J);e=W.shift();)e.__d&&(t=W.length,n=void 0,o=(_=(i=e).__v).__e,r=[],h=[],i.__P&&((n=E({},_)).__v=_.__v+1,v.vnode&&v.vnode(n),ot(i.__P,n,_,i.__n,i.__P.ownerSVGElement!==void 0,32&_.__u?[o]:null,r,o??L(_),!!(32&_.__u),h),n.__v=_.__v,n.__.__k[n.__i]=n,Mt(r,n,h),n.__e!=o&&Ht(n)),W.length>t&&W.sort(J));V.__r=0}function St(e,t,i,n,_,o,r,h,a,c,d){var s,u,l,b,k,g=n&&n.__k||kt,p=t.length;for(i.__d=a,Lt(i,t,g),a=i.__d,s=0;s<p;s++)(l=i.__k[s])!=null&&typeof l!="boolean"&&typeof l!="function"&&(u=l.__i===-1?j:g[l.__i]||j,l.__i=s,ot(e,l,u,_,o,r,h,a,c,d),b=l.__e,l.ref&&u.ref!=l.ref&&(u.ref&&st(u.ref,null,l),d.push(l.ref,l.__c||b,l)),k==null&&b!=null&&(k=b),65536&l.__u||u.__k===l.__k?(a&&!a.isConnected&&(a=L(u)),a=Tt(l,a,e)):typeof l.type=="function"&&l.__d!==void 0?a=l.__d:b&&(a=b.nextSibling),l.__d=void 0,l.__u&=-196609);i.__d=a,i.__e=k}function Lt(e,t,i){var n,_,o,r,h,a=t.length,c=i.length,d=c,s=0;for(e.__k=[],n=0;n<a;n++)r=n+s,(_=e.__k[n]=(_=t[n])==null||typeof _=="boolean"||typeof _=="function"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"||_.constructor==String?U(null,_,null,null,null):_t(_)?U(O,{children:_},null,null,null):_.constructor===void 0&&_.__b>0?U(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):_)!=null?(_.__=e,_.__b=e.__b+1,h=Ot(_,i,r,d),_.__i=h,o=null,h!==-1&&(d--,(o=i[h])&&(o.__u|=131072)),o==null||o.__v===null?(h==-1&&s--,typeof _.type!="function"&&(_.__u|=65536)):h!==r&&(h===r+1?s++:h>r?d>a-r?s+=h-r:s--:h<r?h==r-1&&(s=h-r):s=0,h!==n+s&&(_.__u|=65536))):(o=i[r])&&o.key==null&&o.__e&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=L(o)),tt(o,o,!1),i[r]=null,d--);if(d)for(n=0;n<c;n++)(o=i[n])!=null&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=L(o)),tt(o,o))}function Tt(e,t,i){var n,_;if(typeof e.type=="function"){for(n=e.__k,_=0;n&&_<n.length;_++)n[_]&&(n[_].__=e,t=Tt(n[_],t,i));return t}e.__e!=t&&(i.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Ot(e,t,i,n){var _=e.key,o=e.type,r=i-1,h=i+1,a=t[i];if(a===null||a&&_==a.key&&o===a.type&&!(131072&a.__u))return i;if(n>(a!=null&&!(131072&a.__u)?1:0))for(;r>=0||h<t.length;){if(r>=0){if((a=t[r])&&!(131072&a.__u)&&_==a.key&&o===a.type)return r;r--}if(h<t.length){if((a=t[h])&&!(131072&a.__u)&&_==a.key&&o===a.type)return h;h++}}return-1}function at(e,t,i){t[0]==="-"?e.setProperty(t,i??""):e[t]=i==null?"":typeof i!="number"||Et.test(t)?i:i+"px"}function F(e,t,i,n,_){var o;t:if(t==="style")if(typeof i=="string")e.style.cssText=i;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)i&&t in i||at(e.style,t,"");if(i)for(t in i)n&&i[t]===n[t]||at(e.style,t,i[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=i,i?n?i.u=n.u:(i.u=nt,e.addEventListener(t,o?Z:Q,o)):e.removeEventListener(t,o?Z:Q,o);else{if(_)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t in e)try{e[t]=i??"";break t}catch{}typeof i=="function"||(i==null||i===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,i))}}function lt(e){return function(t){if(this.l){var i=this.l[t.type+e];if(t.t==null)t.t=nt++;else if(t.t<i.u)return;return i(v.event?v.event(t):t)}}}function ot(e,t,i,n,_,o,r,h,a,c){var d,s,u,l,b,k,g,p,x,$,f,C,w,S,P,D=t.type;if(t.constructor!==void 0)return null;128&i.__u&&(a=!!(32&i.__u),o=[h=t.__e=i.__e]),(d=v.__b)&&d(t);t:if(typeof D=="function")try{if(p=t.props,x=(d=D.contextType)&&n[d.__c],$=d?x?x.props.value:d.__:n,i.__c?g=(s=t.__c=i.__c).__=s.__E:("prototype"in D&&D.prototype.render?t.__c=s=new D(p,$):(t.__c=s=new R(p,$),s.constructor=D,s.render=Ft),x&&x.sub(s),s.props=p,s.state||(s.state={}),s.context=$,s.__n=n,u=s.__d=!0,s.__h=[],s._sb=[]),s.__s==null&&(s.__s=s.state),D.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=E({},s.__s)),E(s.__s,D.getDerivedStateFromProps(p,s.__s))),l=s.props,b=s.state,s.__v=t,u)D.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(D.getDerivedStateFromProps==null&&p!==l&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(p,$),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(p,s.__s,$)===!1||t.__v===i.__v)){for(t.__v!==i.__v&&(s.props=p,s.state=s.__s,s.__d=!1),t.__e=i.__e,t.__k=i.__k,t.__k.forEach(function(A){A&&(A.__=t)}),f=0;f<s._sb.length;f++)s.__h.push(s._sb[f]);s._sb=[],s.__h.length&&r.push(s);break t}s.componentWillUpdate!=null&&s.componentWillUpdate(p,s.__s,$),s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(l,b,k)})}if(s.context=$,s.props=p,s.__P=e,s.__e=!1,C=v.__r,w=0,"prototype"in D&&D.prototype.render){for(s.state=s.__s,s.__d=!1,C&&C(t),d=s.render(s.props,s.state,s.context),S=0;S<s._sb.length;S++)s.__h.push(s._sb[S]);s._sb=[]}else do s.__d=!1,C&&C(t),d=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++w<25);s.state=s.__s,s.getChildContext!=null&&(n=E(E({},n),s.getChildContext())),u||s.getSnapshotBeforeUpdate==null||(k=s.getSnapshotBeforeUpdate(l,b)),St(e,_t(P=d!=null&&d.type===O&&d.key==null?d.props.children:d)?P:[P],t,i,n,_,o,r,h,a,c),s.base=t.__e,t.__u&=-161,s.__h.length&&r.push(s),g&&(s.__E=s.__=null)}catch(A){t.__v=null,a||o!=null?(t.__e=h,t.__u|=a?160:32,o[o.indexOf(h)]=null):(t.__e=i.__e,t.__k=i.__k),v.__e(A,t,i)}else o==null&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=jt(i.__e,t,i,n,_,o,r,a,c);(d=v.diffed)&&d(t)}function Mt(e,t,i){t.__d=void 0;for(var n=0;n<i.length;n++)st(i[n],i[++n],i[++n]);v.__c&&v.__c(t,e),e.some(function(_){try{e=_.__h,_.__h=[],e.some(function(o){o.call(_)})}catch(o){v.__e(o,_.__v)}})}function jt(e,t,i,n,_,o,r,h,a){var c,d,s,u,l,b,k,g=i.props,p=t.props,x=t.type;if(x==="svg"&&(_=!0),o!=null){for(c=0;c<o.length;c++)if((l=o[c])&&"setAttribute"in l==!!x&&(x?l.localName===x:l.nodeType===3)){e=l,o[c]=null;break}}if(e==null){if(x===null)return document.createTextNode(p);e=_?document.createElementNS("http://www.w3.org/2000/svg",x):document.createElement(x,p.is&&p),o=null,h=!1}if(x===null)g===p||h&&e.data===p||(e.data=p);else{if(o=o&&B.call(e.childNodes),g=i.props||j,!h&&o!=null)for(g={},c=0;c<e.attributes.length;c++)g[(l=e.attributes[c]).name]=l.value;for(c in g)l=g[c],c=="children"||(c=="dangerouslySetInnerHTML"?s=l:c==="key"||c in p||F(e,c,null,l,_));for(c in p)l=p[c],c=="children"?u=l:c=="dangerouslySetInnerHTML"?d=l:c=="value"?b=l:c=="checked"?k=l:c==="key"||h&&typeof l!="function"||g[c]===l||F(e,c,l,g[c],_);if(d)h||s&&(d.__html===s.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(s&&(e.innerHTML=""),St(e,_t(u)?u:[u],t,i,n,_&&x!=="foreignObject",o,r,o?o[0]:i.__k&&L(i,0),h,a),o!=null)for(c=o.length;c--;)o[c]!=null&&Dt(o[c]);h||(c="value",b!==void 0&&(b!==e[c]||x==="progress"&&!b||x==="option"&&b!==g[c])&&F(e,c,b,g[c],!1),c="checked",k!==void 0&&k!==e[c]&&F(e,c,k,g[c],!1))}return e}function st(e,t,i){try{typeof e=="function"?e(t):e.current=t}catch(n){v.__e(n,i)}}function tt(e,t,i){var n,_;if(v.unmount&&v.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||st(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){v.__e(o,t)}n.base=n.__P=null}if(n=e.__k)for(_=0;_<n.length;_++)n[_]&&tt(n[_],t,i||typeof e.type!="function");i||e.__e==null||Dt(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Ft(e,t,i){return this.constructor(e,i)}function Ut(e,t,i){var n,_,o,r;v.__&&v.__(e,t),_=(n=typeof i=="function")?null:t.__k,o=[],r=[],ot(t,e=(!n&&i||t).__k=At(O,null,[e]),_||j,j,t.ownerSVGElement!==void 0,!n&&i?[i]:_?null:t.firstChild?B.call(t.childNodes):null,o,!n&&i?i:_?_.__e:t.firstChild,n,r),Mt(o,e,r)}B=kt.slice,v={__e:function(e,t,i,n){for(var _,o,r;t=t.__;)if((_=t.__c)&&!_.__)try{if((o=_.constructor)&&o.getDerivedStateFromError!=null&&(_.setState(o.getDerivedStateFromError(e)),r=_.__d),_.componentDidCatch!=null&&(_.componentDidCatch(e,n||{}),r=_.__d),r)return _.__E=_}catch(h){e=h}throw e}},bt=0,R.prototype.setState=function(e,t){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof e=="function"&&(e=e(E({},i),this.props)),e&&E(i,e),e!=null&&this.__v&&(t&&this._sb.push(t),ct(this))},R.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ct(this))},R.prototype.render=O,W=[],wt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,J=function(e,t){return e.__v.__b-t.__v.__b},V.__r=0,nt=0,Q=lt(!1),Z=lt(!0);var z,m,Y,dt,et=0,$t=[],I=[],y=v,ut=y.__b,ft=y.__r,pt=y.diffed,vt=y.__c,mt=y.unmount,yt=y.__;function Pt(e,t){y.__h&&y.__h(m,e,et||t),et=0;var i=m.__H||(m.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({__V:I}),i.__[e]}function N(e){return et=1,Rt(Nt,e)}function Rt(e,t,i){var n=Pt(z++,2);if(n.t=e,!n.__c&&(n.__=[Nt(void 0,t),function(h){var a=n.__N?n.__N[0]:n.__[0],c=n.t(a,h);a!==c&&(n.__N=[c,n.__[1]],n.__c.setState({}))}],n.__c=m,!m.u)){var _=function(h,a,c){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(u){return!!u.__c});if(d.every(function(u){return!u.__N}))return!o||o.call(this,h,a,c);var s=!1;return d.forEach(function(u){if(u.__N){var l=u.__[0];u.__=u.__N,u.__N=void 0,l!==u.__[0]&&(s=!0)}}),!(!s&&n.__c.props===h)&&(!o||o.call(this,h,a,c))};m.u=!0;var o=m.shouldComponentUpdate,r=m.componentWillUpdate;m.componentWillUpdate=function(h,a,c){if(this.__e){var d=o;o=void 0,_(h,a,c),o=d}r&&r.call(this,h,a,c)},m.shouldComponentUpdate=_}return n.__N||n.__}function gt(e,t){var i=Pt(z++,3);!y.__s&&Vt(i.__H,t)&&(i.__=e,i.i=t,m.__H.__h.push(i))}function It(){for(var e;e=$t.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(q),e.__H.__h.forEach(it),e.__H.__h=[]}catch(t){e.__H.__h=[],y.__e(t,e.__v)}}y.__b=function(e){m=null,ut&&ut(e)},y.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),yt&&yt(e,t)},y.__r=function(e){ft&&ft(e),z=0;var t=(m=e.__c).__H;t&&(Y===m?(t.__h=[],m.__h=[],t.__.forEach(function(i){i.__N&&(i.__=i.__N),i.__V=I,i.__N=i.i=void 0})):(t.__h.forEach(q),t.__h.forEach(it),t.__h=[],z=0)),Y=m},y.diffed=function(e){pt&&pt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&($t.push(t)!==1&&dt===y.requestAnimationFrame||((dt=y.requestAnimationFrame)||qt)(It)),t.__H.__.forEach(function(i){i.i&&(i.__H=i.i),i.__V!==I&&(i.__=i.__V),i.i=void 0,i.__V=I})),Y=m=null},y.__c=function(e,t){t.some(function(i){try{i.__h.forEach(q),i.__h=i.__h.filter(function(n){return!n.__||it(n)})}catch(n){t.some(function(_){_.__h&&(_.__h=[])}),t=[],y.__e(n,i.__v)}}),vt&&vt(e,t)},y.unmount=function(e){mt&&mt(e);var t,i=e.__c;i&&i.__H&&(i.__H.__.forEach(function(n){try{q(n)}catch(_){t=_}}),i.__H=void 0,t&&y.__e(t,i.__v))};var xt=typeof requestAnimationFrame=="function";function qt(e){var t,i=function(){clearTimeout(n),xt&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(i,100);xt&&(t=requestAnimationFrame(i))}function q(e){var t=m,i=e.__c;typeof i=="function"&&(e.__c=void 0,i()),m=t}function it(e){var t=m;e.__c=e.__(),m=t}function Vt(e,t){return!e||e.length!==t.length||t.some(function(i,n){return i!==e[n]})}function Nt(e,t){return typeof t=="function"?t(e):t}class zt{constructor(t,i,n=1e3,_=1e3){this.objs={},this.index=0,this.centerObj=null,this.boardWidth=5e3,this.boardHeight=5e3,this.ctx=t,this.canvas=i,this.boardWidth=n,this.boardHeight=_}setCenter(t){this.centerObj=t}remove(t){delete this.objs[t]}add(t){return this.objs[this.index]=t,this.index++}drawGrid(){const i="rgba(200, 200, 200)";this.ctx.beginPath();for(let n=0;n<=this.boardHeight;n+=20)this.ctx.moveTo(0,n),this.ctx.lineTo(this.boardWidth,n);for(let n=0;n<=this.boardWidth;n+=20)this.ctx.moveTo(n,0),this.ctx.lineTo(n,this.boardHeight);this.ctx.strokeStyle=i,this.ctx.stroke()}draw(){this.ctx.save(),this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.centerObj&&this.ctx.translate(this.canvas.width/2-this.centerObj.x,this.canvas.height/2-this.centerObj.y),this.drawGrid();for(const t in this.objs){const i=this.objs[t];if(!i.live){this.remove(+t);continue}if(i.tick(),this.centerObj){const n=i.x-this.centerObj.x,_=i.y-this.centerObj.y;Math.sqrt(n**2+_**2)<=this.boardHeight&&i.draw()}else i.draw()}this.ctx.restore()}}class rt{constructor(t,i,n,_,o){this.id=0,this.width=0,this.height=0,this.x=0,this.y=0,this.vx=0,this.vy=0,this.team=0,this.live=!0,this.name="Player",this.bodyScore=0,this.score=0,this.level=1,this.health=100,this.lastAttackedTime=0,this.bodyDamage=2,this.maxHealth=2,this.healthRegen=0,this.moveSpeed=1,this.nextTick=[],this.world=t,this.team=i,this.id=this.world.add(this),this.x=n,this.y=_,o?this.name=o:this.name+=" "+this.id}getDie(){this.live=!1}getAttack(t){const i=Math.max(0,this.bodyDamage*15-t.maxHealth*10);t.health-=i,t.lastAttackedTime=+new Date,i>0&&(t.vx=this.vx*.8,t.vy=this.vy*.8,t.nextTickEvent(()=>t.stop())),t.health<0&&(t.getDie(),this.bodyScore+=Math.round(this.bodyDamage*15-t.maxHealth*10))}getHit(t){this.getAttack(t),t.getAttack(this)}move(t){this.vx=Math.cos(t)*(this.moveSpeed*5),this.vy=Math.sin(t)*(this.moveSpeed*5)}stop(){this.vx=this.vy=0}nextTickEvent(t){this.nextTick.push(t)}tick(){this.x=Math.max(0,Math.min(this.world.boardWidth,this.x+this.vx)),this.y=Math.max(0,Math.min(this.world.boardHeight,this.y+this.vy)),this.health<100&&(this.health+=this.healthRegen*.1,+new Date-this.lastAttackedTime>3e4&&(this.health+=Math.log(this.health+1)*.3),(this.health>100||isNaN(this.health))&&(this.health=100));for(const t of this.nextTick)t();this.nextTick=[];for(const t in this.world.objs){const i=this.world.objs[t];this!==i&&this.x<i.x+i.width&&this.x+this.width>i.x&&this.y<i.y+i.height&&this.y+this.height>i.y&&this.team!==i.team&&this.getHit(i)}this.score=this.bodyScore}draw(){}}class Bt extends rt{constructor(){super(...arguments),this.lastLaunchTime=0,this.bullets=[]}_launch(t){+new Date-this.lastLaunchTime>40&&(this.lastLaunchTime=+new Date,this.bullets.push(new Gt(this.world,this.team,this.x+this.width/2,this.y+this.height/2,t)))}tick(){super.tick(),this.score=this.bodyScore+this.bullets.reduce((t,i)=>t+i.score,0)}}class Ct extends Bt{constructor(){super(...arguments),this.width=20,this.height=20}draw(){this.world.ctx.fillStyle="#0095DD",this.world.ctx.fillRect(this.x,this.y,this.width,this.height),this.world.ctx.textAlign="center",this.world.ctx.fillText(this.name,this.x+this.width/2,this.y+this.height/2-15),this.world.ctx.fillText(this.health.toFixed(0),this.x+this.width/2,this.y+this.height/2+20)}launch(){this._launch(Math.atan2(-1,0)),this._launch(Math.atan2(1,0)),this._launch(Math.atan2(0,-1)),this._launch(Math.atan2(0,1))}}class Gt extends rt{constructor(t,i,n,_,o){super(t,i,n,_),this.width=5,this.height=5,this.startTime=0,this.maxHealth=.4,this.startTime=+new Date,this.move(o)}tick(){super.tick(),+new Date-this.startTime>2e3&&this.getDie()}draw(){this.world.ctx.fillStyle="#0095DD",this.world.ctx.beginPath(),this.world.ctx.arc(this.x,this.y,this.width,0,Math.PI*2),this.world.ctx.fill()}}class Xt extends Ct{draw(){this.world.ctx.fillStyle="#777",this.world.ctx.fillRect(this.x,this.y,this.width,this.height),this.world.ctx.textAlign="center",this.world.ctx.fillText(this.name,this.x+this.width/2,this.y+this.height/2-15),this.world.ctx.fillText(this.health.toFixed(0),this.x+this.width/2,this.y+this.height/2+20)}}class K extends rt{constructor(t,i,n,_,o="red"){super(t,i,n,_),this.width=8,this.height=8,this.color=o}tick(){super.tick();let t=null,i=1/0;for(const n in this.world.objs){const _=this.world.objs[n];if(_===this||_.team===this.team)continue;const o=_.x-this.x,r=_.y-this.y,h=Math.sqrt(o*o+r*r);h<i&&(i=h,t=_)}if(t){const n=Math.atan2(t.y-this.y,t.x-this.x);this.move(n)}}draw(){this.world.ctx.fillStyle=this.color,this.world.ctx.beginPath(),this.world.ctx.arc(this.x,this.y,this.width,0,Math.PI*2),this.world.ctx.fill()}}var Yt=0;function M(e,t,i,n,_,o){var r,h,a={};for(h in t)h=="ref"?r=t[h]:a[h]=t[h];var c={type:e,props:a,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Yt,__i:-1,__u:0,__source:_,__self:o};if(typeof e=="function"&&(r=e.defaultProps))for(h in r)a[h]===void 0&&(a[h]=r[h]);return v.vnode&&v.vnode(c),c}function Kt(){const e=Wt(),[t,i]=N(null),[n,_]=N(null),[o,r]=N(0),[h,a]=N(0),[c,d]=N(0),[s,u]=N(!1),[l,b]=N(!1),[k,g]=N(0),[p,x]=N(0),$=+new Date;return gt(()=>{if(e!=null&&e.current){const f=e.current;i(f),_(f.getContext("2d"))}},[e]),gt(()=>{if(n){const f=new zt(n,t),C=70,w=new Ct(f,1,20,20),S=new K(f,5,f.boardWidth/2,f.boardHeight/2),P=new K(f,1,f.boardWidth/3,f.boardHeight/3,"#0095DD");let D=0;w.maxHealth=3,w.healthRegen=0,w.moveSpeed=1,w.bodyDamage=2,S.maxHealth=5,S.healthRegen=0,S.moveSpeed=.8,S.bodyDamage=4,P.maxHealth=5,P.healthRegen=0,P.moveSpeed=.4,P.bodyDamage=4,P.live=!1,f.setCenter(w),t.addEventListener("touchstart",H=>{const T=H.touches[0].clientX,G=H.touches[0].clientY,X=Math.atan2(G-t.height/2,T-t.width/2);w.move(X),H.preventDefault()},{passive:!1}),t.addEventListener("touchmove",H=>{const T=H.touches[0].clientX,G=H.touches[0].clientY,X=Math.atan2(G-t.height/2,T-t.width/2);w.move(X),H.preventDefault()},{passive:!1}),document.addEventListener("keydown",H=>{switch(H.code){case"ArrowUp":w.move(Math.atan2(-1,0));break;case"ArrowDown":w.move(Math.atan2(1,0));break;case"ArrowLeft":w.move(Math.atan2(0,-1));break;case"ArrowRight":w.move(Math.atan2(0,1));break}});const A=()=>{f.draw(),d(+new Date-$),g(P.score+(w.live?w.score:0)),x(S.score);const H=Object.keys(f.objs);if(H.length<C)for(let T=0;T<C-H.length;T++)new Xt(f,0,Math.random()*f.boardWidth,Math.random()*f.boardHeight,"Dust");if(+new Date-D>1e3*k/10){const T=new K(f,5,f.boardWidth/2,f.boardHeight/2);T.maxHealth=5,T.healthRegen=0,T.moveSpeed=.8,T.bodyDamage=4,D=+new Date}f.centerObj===w&&!w.live&&(u(!0),f.setCenter(S)),requestAnimationFrame(A)};A()}},[n]),r(document.body.clientWidth),a(document.body.clientHeight),window.addEventListener("resize",f=>{r(document.body.clientWidth),a(document.body.clientHeight)},!0),M(O,{children:[M("canvas",{ref:e,width:o,height:h}),l?M("h1",{className:"win",children:"Win!"}):s?M("h1",{className:"game-over",children:"Game over"}):null,M("div",{className:"score-board",children:[M("span",{className:"time",children:[`0${Math.floor(c/6e4%60)}`.slice(-2),":",`0${Math.floor(c/1e3%60)}`.slice(-2),":",`0${Math.floor(c/10)}`.slice(-2)]})," ",M("span",{className:"score",children:[k>0?M(O,{children:[M("span",{className:"my-score",children:k})," vs "]}):null,M("span",{className:"drone-score",children:p})]})]})]})}Ut(M(Kt,{}),document.getElementById("app"));
