(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))_(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&_(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function _(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();var z,p,xt,E,st,bt,Y,et,K,J,O={},wt=[],Ct=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,it=Array.isArray;function C(e,t){for(var i in t)e[i]=t[i];return e}function kt(e){var t=e.parentNode;t&&t.removeChild(e)}function Et(e,t,i){var _,n,o,r={};for(o in t)o=="key"?_=t[o]:o=="ref"?n=t[o]:r[o]=t[o];if(arguments.length>2&&(r.children=arguments.length>3?z.call(arguments,2):i),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)r[o]===void 0&&(r[o]=e.defaultProps[o]);return F(e,r,_,n,null)}function F(e,t,i,_,n){var o={type:e,props:t,key:i,ref:_,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:n??++xt,__i:-1,__u:0};return n==null&&p.vnode!=null&&p.vnode(o),o}function At(){return{current:null}}function L(e){return e.children}function U(e,t){this.props=e,this.context=t}function A(e,t){if(t==null)return e.__?A(e.__,e.__i+1):null;for(var i;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null)return i.__e;return typeof e.type=="function"?A(e):null}function Ht(e){var t,i;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null){e.__e=e.__c.base=i.__e;break}return Ht(e)}}function rt(e){(!e.__d&&(e.__d=!0)&&E.push(e)&&!q.__r++||st!==p.debounceRendering)&&((st=p.debounceRendering)||bt)(q)}function q(){var e,t,i,_,n,o,r,h;for(E.sort(Y);e=E.shift();)e.__d&&(t=E.length,_=void 0,o=(n=(i=e).__v).__e,r=[],h=[],i.__P&&((_=C({},n)).__v=n.__v+1,p.vnode&&p.vnode(_),_t(i.__P,_,n,i.__n,i.__P.ownerSVGElement!==void 0,32&n.__u?[o]:null,r,o??A(n),!!(32&n.__u),h),_.__v=n.__v,_.__.__k[_.__i]=_,Tt(r,_,h),_.__e!=o&&Ht(_)),E.length>t&&E.sort(Y));q.__r=0}function Dt(e,t,i,_,n,o,r,h,l,c,d){var s,u,a,b,D,g=_&&_.__k||wt,f=t.length;for(i.__d=l,Wt(i,t,g),l=i.__d,s=0;s<f;s++)(a=i.__k[s])!=null&&typeof a!="boolean"&&typeof a!="function"&&(u=a.__i===-1?O:g[a.__i]||O,a.__i=s,_t(e,a,u,n,o,r,h,l,c,d),b=a.__e,a.ref&&u.ref!=a.ref&&(u.ref&&nt(u.ref,null,a),d.push(a.ref,a.__c||b,a)),D==null&&b!=null&&(D=b),65536&a.__u||u.__k===a.__k?(l&&!l.isConnected&&(l=A(u)),l=St(a,l,e)):typeof a.type=="function"&&a.__d!==void 0?l=a.__d:b&&(l=b.nextSibling),a.__d=void 0,a.__u&=-196609);i.__d=l,i.__e=D}function Wt(e,t,i){var _,n,o,r,h,l=t.length,c=i.length,d=c,s=0;for(e.__k=[],_=0;_<l;_++)r=_+s,(n=e.__k[_]=(n=t[_])==null||typeof n=="boolean"||typeof n=="function"?null:typeof n=="string"||typeof n=="number"||typeof n=="bigint"||n.constructor==String?F(null,n,null,null,null):it(n)?F(L,{children:n},null,null,null):n.constructor===void 0&&n.__b>0?F(n.type,n.props,n.key,n.ref?n.ref:null,n.__v):n)!=null?(n.__=e,n.__b=e.__b+1,h=Lt(n,i,r,d),n.__i=h,o=null,h!==-1&&(d--,(o=i[h])&&(o.__u|=131072)),o==null||o.__v===null?(h==-1&&s--,typeof n.type!="function"&&(n.__u|=65536)):h!==r&&(h===r+1?s++:h>r?d>l-r?s+=h-r:s--:h<r?h==r-1&&(s=h-r):s=0,h!==_+s&&(n.__u|=65536))):(o=i[r])&&o.key==null&&o.__e&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=A(o)),Q(o,o,!1),i[r]=null,d--);if(d)for(_=0;_<c;_++)(o=i[_])!=null&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=A(o)),Q(o,o))}function St(e,t,i){var _,n;if(typeof e.type=="function"){for(_=e.__k,n=0;_&&n<_.length;n++)_[n]&&(_[n].__=e,t=St(_[n],t,i));return t}e.__e!=t&&(i.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Lt(e,t,i,_){var n=e.key,o=e.type,r=i-1,h=i+1,l=t[i];if(l===null||l&&n==l.key&&o===l.type&&!(131072&l.__u))return i;if(_>(l!=null&&!(131072&l.__u)?1:0))for(;r>=0||h<t.length;){if(r>=0){if((l=t[r])&&!(131072&l.__u)&&n==l.key&&o===l.type)return r;r--}if(h<t.length){if((l=t[h])&&!(131072&l.__u)&&n==l.key&&o===l.type)return h;h++}}return-1}function ht(e,t,i){t[0]==="-"?e.setProperty(t,i??""):e[t]=i==null?"":typeof i!="number"||Ct.test(t)?i:i+"px"}function j(e,t,i,_,n){var o;t:if(t==="style")if(typeof i=="string")e.style.cssText=i;else{if(typeof _=="string"&&(e.style.cssText=_=""),_)for(t in _)i&&t in i||ht(e.style,t,"");if(i)for(t in i)_&&i[t]===_[t]||ht(e.style,t,i[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=i,i?_?i.u=_.u:(i.u=et,e.addEventListener(t,o?J:K,o)):e.removeEventListener(t,o?J:K,o);else{if(n)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t in e)try{e[t]=i??"";break t}catch{}typeof i=="function"||(i==null||i===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,i))}}function ct(e){return function(t){if(this.l){var i=this.l[t.type+e];if(t.t==null)t.t=et++;else if(t.t<i.u)return;return i(p.event?p.event(t):t)}}}function _t(e,t,i,_,n,o,r,h,l,c){var d,s,u,a,b,D,g,f,x,M,v,N,w,S,$,H=t.type;if(t.constructor!==void 0)return null;128&i.__u&&(l=!!(32&i.__u),o=[h=t.__e=i.__e]),(d=p.__b)&&d(t);t:if(typeof H=="function")try{if(f=t.props,x=(d=H.contextType)&&_[d.__c],M=d?x?x.props.value:d.__:_,i.__c?g=(s=t.__c=i.__c).__=s.__E:("prototype"in H&&H.prototype.render?t.__c=s=new H(f,M):(t.__c=s=new U(f,M),s.constructor=H,s.render=jt),x&&x.sub(s),s.props=f,s.state||(s.state={}),s.context=M,s.__n=_,u=s.__d=!0,s.__h=[],s._sb=[]),s.__s==null&&(s.__s=s.state),H.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=C({},s.__s)),C(s.__s,H.getDerivedStateFromProps(f,s.__s))),a=s.props,b=s.state,s.__v=t,u)H.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(H.getDerivedStateFromProps==null&&f!==a&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(f,M),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(f,s.__s,M)===!1||t.__v===i.__v)){for(t.__v!==i.__v&&(s.props=f,s.state=s.__s,s.__d=!1),t.__e=i.__e,t.__k=i.__k,t.__k.forEach(function(k){k&&(k.__=t)}),v=0;v<s._sb.length;v++)s.__h.push(s._sb[v]);s._sb=[],s.__h.length&&r.push(s);break t}s.componentWillUpdate!=null&&s.componentWillUpdate(f,s.__s,M),s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(a,b,D)})}if(s.context=M,s.props=f,s.__P=e,s.__e=!1,N=p.__r,w=0,"prototype"in H&&H.prototype.render){for(s.state=s.__s,s.__d=!1,N&&N(t),d=s.render(s.props,s.state,s.context),S=0;S<s._sb.length;S++)s.__h.push(s._sb[S]);s._sb=[]}else do s.__d=!1,N&&N(t),d=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++w<25);s.state=s.__s,s.getChildContext!=null&&(_=C(C({},_),s.getChildContext())),u||s.getSnapshotBeforeUpdate==null||(D=s.getSnapshotBeforeUpdate(a,b)),Dt(e,it($=d!=null&&d.type===L&&d.key==null?d.props.children:d)?$:[$],t,i,_,n,o,r,h,l,c),s.base=t.__e,t.__u&=-161,s.__h.length&&r.push(s),g&&(s.__E=s.__=null)}catch(k){t.__v=null,l||o!=null?(t.__e=h,t.__u|=l?160:32,o[o.indexOf(h)]=null):(t.__e=i.__e,t.__k=i.__k),p.__e(k,t,i)}else o==null&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=Ot(i.__e,t,i,_,n,o,r,l,c);(d=p.diffed)&&d(t)}function Tt(e,t,i){t.__d=void 0;for(var _=0;_<i.length;_++)nt(i[_],i[++_],i[++_]);p.__c&&p.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(o){o.call(n)})}catch(o){p.__e(o,n.__v)}})}function Ot(e,t,i,_,n,o,r,h,l){var c,d,s,u,a,b,D,g=i.props,f=t.props,x=t.type;if(x==="svg"&&(n=!0),o!=null){for(c=0;c<o.length;c++)if((a=o[c])&&"setAttribute"in a==!!x&&(x?a.localName===x:a.nodeType===3)){e=a,o[c]=null;break}}if(e==null){if(x===null)return document.createTextNode(f);e=n?document.createElementNS("http://www.w3.org/2000/svg",x):document.createElement(x,f.is&&f),o=null,h=!1}if(x===null)g===f||h&&e.data===f||(e.data=f);else{if(o=o&&z.call(e.childNodes),g=i.props||O,!h&&o!=null)for(g={},c=0;c<e.attributes.length;c++)g[(a=e.attributes[c]).name]=a.value;for(c in g)a=g[c],c=="children"||(c=="dangerouslySetInnerHTML"?s=a:c==="key"||c in f||j(e,c,null,a,n));for(c in f)a=f[c],c=="children"?u=a:c=="dangerouslySetInnerHTML"?d=a:c=="value"?b=a:c=="checked"?D=a:c==="key"||h&&typeof a!="function"||g[c]===a||j(e,c,a,g[c],n);if(d)h||s&&(d.__html===s.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(s&&(e.innerHTML=""),Dt(e,it(u)?u:[u],t,i,_,n&&x!=="foreignObject",o,r,o?o[0]:i.__k&&A(i,0),h,l),o!=null)for(c=o.length;c--;)o[c]!=null&&kt(o[c]);h||(c="value",b!==void 0&&(b!==e[c]||x==="progress"&&!b||x==="option"&&b!==g[c])&&j(e,c,b,g[c],!1),c="checked",D!==void 0&&D!==e[c]&&j(e,c,D,g[c],!1))}return e}function nt(e,t,i){try{typeof e=="function"?e(t):e.current=t}catch(_){p.__e(_,i)}}function Q(e,t,i){var _,n;if(p.unmount&&p.unmount(e),(_=e.ref)&&(_.current&&_.current!==e.__e||nt(_,null,t)),(_=e.__c)!=null){if(_.componentWillUnmount)try{_.componentWillUnmount()}catch(o){p.__e(o,t)}_.base=_.__P=null}if(_=e.__k)for(n=0;n<_.length;n++)_[n]&&Q(_[n],t,i||typeof e.type!="function");i||e.__e==null||kt(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function jt(e,t,i){return this.constructor(e,i)}function Ft(e,t,i){var _,n,o,r;p.__&&p.__(e,t),n=(_=typeof i=="function")?null:t.__k,o=[],r=[],_t(t,e=(!_&&i||t).__k=Et(L,null,[e]),n||O,O,t.ownerSVGElement!==void 0,!_&&i?[i]:n?null:t.firstChild?z.call(t.childNodes):null,o,!_&&i?i:n?n.__e:t.firstChild,_,r),Tt(o,e,r)}z=wt.slice,p={__e:function(e,t,i,_){for(var n,o,r;t=t.__;)if((n=t.__c)&&!n.__)try{if((o=n.constructor)&&o.getDerivedStateFromError!=null&&(n.setState(o.getDerivedStateFromError(e)),r=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(e,_||{}),r=n.__d),r)return n.__E=n}catch(h){e=h}throw e}},xt=0,U.prototype.setState=function(e,t){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=C({},this.state),typeof e=="function"&&(e=e(C({},i),this.props)),e&&C(i,e),e!=null&&this.__v&&(t&&this._sb.push(t),rt(this))},U.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),rt(this))},U.prototype.render=L,E=[],bt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Y=function(e,t){return e.__v.__b-t.__v.__b},q.__r=0,et=0,K=ct(!1),J=ct(!0);var V,m,X,lt,Z=0,Mt=[],R=[],y=p,at=y.__b,dt=y.__r,ut=y.diffed,ft=y.__c,pt=y.unmount,vt=y.__;function $t(e,t){y.__h&&y.__h(m,e,Z||t),Z=0;var i=m.__H||(m.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({__V:R}),i.__[e]}function P(e){return Z=1,Ut(Pt,e)}function Ut(e,t,i){var _=$t(V++,2);if(_.t=e,!_.__c&&(_.__=[Pt(void 0,t),function(h){var l=_.__N?_.__N[0]:_.__[0],c=_.t(l,h);l!==c&&(_.__N=[c,_.__[1]],_.__c.setState({}))}],_.__c=m,!m.u)){var n=function(h,l,c){if(!_.__c.__H)return!0;var d=_.__c.__H.__.filter(function(u){return!!u.__c});if(d.every(function(u){return!u.__N}))return!o||o.call(this,h,l,c);var s=!1;return d.forEach(function(u){if(u.__N){var a=u.__[0];u.__=u.__N,u.__N=void 0,a!==u.__[0]&&(s=!0)}}),!(!s&&_.__c.props===h)&&(!o||o.call(this,h,l,c))};m.u=!0;var o=m.shouldComponentUpdate,r=m.componentWillUpdate;m.componentWillUpdate=function(h,l,c){if(this.__e){var d=o;o=void 0,n(h,l,c),o=d}r&&r.call(this,h,l,c)},m.shouldComponentUpdate=n}return _.__N||_.__}function mt(e,t){var i=$t(V++,3);!y.__s&&qt(i.__H,t)&&(i.__=e,i.i=t,m.__H.__h.push(i))}function Rt(){for(var e;e=Mt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(I),e.__H.__h.forEach(tt),e.__H.__h=[]}catch(t){e.__H.__h=[],y.__e(t,e.__v)}}y.__b=function(e){m=null,at&&at(e)},y.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),vt&&vt(e,t)},y.__r=function(e){dt&&dt(e),V=0;var t=(m=e.__c).__H;t&&(X===m?(t.__h=[],m.__h=[],t.__.forEach(function(i){i.__N&&(i.__=i.__N),i.__V=R,i.__N=i.i=void 0})):(t.__h.forEach(I),t.__h.forEach(tt),t.__h=[],V=0)),X=m},y.diffed=function(e){ut&&ut(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Mt.push(t)!==1&&lt===y.requestAnimationFrame||((lt=y.requestAnimationFrame)||It)(Rt)),t.__H.__.forEach(function(i){i.i&&(i.__H=i.i),i.__V!==R&&(i.__=i.__V),i.i=void 0,i.__V=R})),X=m=null},y.__c=function(e,t){t.some(function(i){try{i.__h.forEach(I),i.__h=i.__h.filter(function(_){return!_.__||tt(_)})}catch(_){t.some(function(n){n.__h&&(n.__h=[])}),t=[],y.__e(_,i.__v)}}),ft&&ft(e,t)},y.unmount=function(e){pt&&pt(e);var t,i=e.__c;i&&i.__H&&(i.__H.__.forEach(function(_){try{I(_)}catch(n){t=n}}),i.__H=void 0,t&&y.__e(t,i.__v))};var yt=typeof requestAnimationFrame=="function";function It(e){var t,i=function(){clearTimeout(_),yt&&cancelAnimationFrame(t),setTimeout(e)},_=setTimeout(i,100);yt&&(t=requestAnimationFrame(i))}function I(e){var t=m,i=e.__c;typeof i=="function"&&(e.__c=void 0,i()),m=t}function tt(e){var t=m;e.__c=e.__(),m=t}function qt(e,t){return!e||e.length!==t.length||t.some(function(i,_){return i!==e[_]})}function Pt(e,t){return typeof t=="function"?t(e):t}class Vt{constructor(t,i,_=1e3,n=1e3){this.objs={},this.index=0,this.centerObj=null,this.boardWidth=5e3,this.boardHeight=5e3,this.ctx=t,this.canvas=i,this.boardWidth=_,this.boardHeight=n}setCenter(t){this.centerObj=t}remove(t){delete this.objs[t]}add(t){return this.objs[this.index]=t,this.index++}drawGrid(){const i="rgba(200, 200, 200)";this.ctx.beginPath();for(let _=0;_<=this.boardHeight;_+=20)this.ctx.moveTo(0,_),this.ctx.lineTo(this.boardWidth,_);for(let _=0;_<=this.boardWidth;_+=20)this.ctx.moveTo(_,0),this.ctx.lineTo(_,this.boardHeight);this.ctx.strokeStyle=i,this.ctx.stroke()}draw(){this.ctx.save(),this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.centerObj&&this.ctx.translate(this.canvas.width/2-this.centerObj.x,this.canvas.height/2-this.centerObj.y),this.drawGrid();for(const t in this.objs){const i=this.objs[t];if(!i.live){this.remove(+t);continue}if(i.tick(),this.centerObj){const _=i.x-this.centerObj.x,n=i.y-this.centerObj.y;Math.sqrt(_**2+n**2)<=this.boardHeight&&i.draw()}else i.draw()}this.ctx.restore()}}class ot{constructor(t,i,_,n,o){this.id=0,this.width=0,this.height=0,this.x=0,this.y=0,this.vx=0,this.vy=0,this.team=0,this.live=!0,this.name="Player",this.bodyScore=0,this.score=0,this.level=1,this.health=100,this.lastAttackedTime=0,this.bodyDamage=2,this.maxHealth=2,this.healthRegen=0,this.moveSpeed=1,this.nextTick=[],this.world=t,this.team=i,this.id=this.world.add(this),this.x=_,this.y=n,o?this.name=o:this.name+=" "+this.id}getDie(){this.live=!1}getAttack(t){const i=Math.max(0,this.bodyDamage*15-t.maxHealth*10);t.health-=i,t.lastAttackedTime=+new Date,i>0&&(t.vx=this.vx*.8,t.vy=this.vy*.8,t.nextTickEvent(()=>t.stop())),t.health<0&&(t.getDie(),this.bodyScore+=Math.round(this.bodyDamage*15-t.maxHealth*10))}getHit(t){this.getAttack(t),t.getAttack(this)}move(t){this.vx=Math.cos(t)*(this.moveSpeed*5),this.vy=Math.sin(t)*(this.moveSpeed*5)}stop(){this.vx=this.vy=0}nextTickEvent(t){this.nextTick.push(t)}tick(){this.x=Math.max(0,Math.min(this.world.boardWidth,this.x+this.vx)),this.y=Math.max(0,Math.min(this.world.boardHeight,this.y+this.vy)),this.health<100&&(this.health+=this.healthRegen*.1,+new Date-this.lastAttackedTime>3e4&&(this.health+=Math.log(this.health+1)*.3),(this.health>100||isNaN(this.health))&&(this.health=100));for(const t of this.nextTick)t();this.nextTick=[];for(const t in this.world.objs){const i=this.world.objs[t];this!==i&&this.x<i.x+i.width&&this.x+this.width>i.x&&this.y<i.y+i.height&&this.y+this.height>i.y&&this.team!==i.team&&this.getHit(i)}this.score=this.bodyScore}draw(){}}class zt extends ot{constructor(){super(...arguments),this.lastLaunchTime=0,this.bullets=[]}_launch(t){+new Date-this.lastLaunchTime>40&&(this.lastLaunchTime=+new Date,this.bullets.push(new Bt(this.world,this.team,this.x+this.width/2,this.y+this.height/2,t)))}tick(){super.tick(),this.score=this.bodyScore+this.bullets.reduce((t,i)=>t+i.score,0)}}class Nt extends zt{constructor(){super(...arguments),this.width=20,this.height=20}draw(){this.world.ctx.fillStyle="#0095DD",this.world.ctx.fillRect(this.x,this.y,this.width,this.height),this.world.ctx.textAlign="center",this.world.ctx.fillText(this.name,this.x+this.width/2,this.y+this.height/2-15),this.world.ctx.fillText(this.health.toFixed(0),this.x+this.width/2,this.y+this.height/2+20)}launch(){this._launch(Math.atan2(-1,0)),this._launch(Math.atan2(1,0)),this._launch(Math.atan2(0,-1)),this._launch(Math.atan2(0,1))}}class Bt extends ot{constructor(t,i,_,n,o){super(t,i,_,n),this.width=5,this.height=5,this.startTime=0,this.maxHealth=.4,this.startTime=+new Date,this.move(o)}tick(){super.tick(),+new Date-this.startTime>2e3&&this.getDie()}draw(){this.world.ctx.fillStyle="#0095DD",this.world.ctx.beginPath(),this.world.ctx.arc(this.x,this.y,this.width,0,Math.PI*2),this.world.ctx.fill()}}class Gt extends Nt{draw(){this.world.ctx.fillStyle="#777",this.world.ctx.fillRect(this.x,this.y,this.width,this.height),this.world.ctx.textAlign="center",this.world.ctx.fillText(this.name,this.x+this.width/2,this.y+this.height/2-15),this.world.ctx.fillText(this.health.toFixed(0),this.x+this.width/2,this.y+this.height/2+20)}}class gt extends ot{constructor(t,i,_,n,o="red"){super(t,i,_,n),this.width=8,this.height=8,this.color=o}tick(){super.tick();let t=null,i=1/0;for(const _ in this.world.objs){const n=this.world.objs[_];if(n===this||n.team===this.team)continue;const o=n.x-this.x,r=n.y-this.y,h=Math.sqrt(o*o+r*r);h<i&&(i=h,t=n)}if(t){const _=Math.atan2(t.y-this.y,t.x-this.x);this.move(_)}}draw(){this.world.ctx.fillStyle=this.color,this.world.ctx.beginPath(),this.world.ctx.arc(this.x,this.y,this.width,0,Math.PI*2),this.world.ctx.fill()}}var Xt=0;function T(e,t,i,_,n,o){var r,h,l={};for(h in t)h=="ref"?r=t[h]:l[h]=t[h];var c={type:e,props:l,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Xt,__i:-1,__u:0,__source:n,__self:o};if(typeof e=="function"&&(r=e.defaultProps))for(h in r)l[h]===void 0&&(l[h]=r[h]);return p.vnode&&p.vnode(c),c}function Yt(){const e=At(),[t,i]=P(null),[_,n]=P(null),[o,r]=P(0),[h,l]=P(0),[c,d]=P(0),[s,u]=P(!1),[a,b]=P(!1),[D,g]=P(0),[f,x]=P(0),M=+new Date;return mt(()=>{if(e!=null&&e.current){const v=e.current;i(v),n(v.getContext("2d"))}},[e]),mt(()=>{if(_){const v=new Vt(_,t),N=70,w=new Nt(v,1,20,20),S=new gt(v,5,v.boardWidth/2,v.boardHeight/2),$=new gt(v,1,v.boardWidth/3,v.boardHeight/3,"#0095DD");w.maxHealth=3,w.healthRegen=0,w.moveSpeed=1,w.bodyDamage=2,S.maxHealth=5,S.healthRegen=0,S.moveSpeed=.8,S.bodyDamage=4,$.maxHealth=5,$.healthRegen=0,$.moveSpeed=.4,$.bodyDamage=4,$.live=!1,v.setCenter(w),t.addEventListener("touchstart",k=>{const W=k.touches[0].clientX,B=k.touches[0].clientY,G=Math.atan2(B-t.height/2,W-t.width/2);w.move(G),k.preventDefault()},{passive:!1}),t.addEventListener("touchmove",k=>{const W=k.touches[0].clientX,B=k.touches[0].clientY,G=Math.atan2(B-t.height/2,W-t.width/2);w.move(G),k.preventDefault()},{passive:!1}),document.addEventListener("keydown",k=>{switch(k.code){case"ArrowUp":w.move(Math.atan2(-1,0));break;case"ArrowDown":w.move(Math.atan2(1,0));break;case"ArrowLeft":w.move(Math.atan2(0,-1));break;case"ArrowRight":w.move(Math.atan2(0,1));break}});const H=()=>{v.draw(),d(+new Date-M),g($.score+(w.live?w.score:0)),x(S.score);const k=Object.keys(v.objs);if(k.length<N)for(let W=0;W<N-k.length;W++)new Gt(v,0,Math.random()*v.boardWidth,Math.random()*v.boardHeight,"Dust");v.centerObj===w&&!w.live&&(u(!0),v.setCenter(S)),requestAnimationFrame(H)};H()}},[_]),r(document.body.clientWidth),l(document.body.clientHeight),window.addEventListener("resize",v=>{r(document.body.clientWidth),l(document.body.clientHeight)},!0),T(L,{children:[T("canvas",{ref:e,width:o,height:h}),a?T("h1",{className:"win",children:"Win!"}):s?T("h1",{className:"game-over",children:"Game over"}):null,T("div",{className:"score-board",children:[T("span",{className:"time",children:[`0${Math.floor(c/6e4%60)}`.slice(-2),":",`0${Math.floor(c/1e3%60)}`.slice(-2),":",`0${Math.floor(c/10)}`.slice(-2)]})," ",T("span",{className:"score",children:[D>0?T(L,{children:[T("span",{className:"my-score",children:D})," vs "]}):null,T("span",{className:"drone-score",children:f})]})]})]})}Ft(T(Yt,{}),document.getElementById("app"));
